<div class="pad margin no-print">
    <div class="callout callout-info" style="margin-bottom: 0!important;">
        <h4><i class="fa fa-info"></i> Note:</h4>
        All the fields marked with asterisk sign(*) are mandatory to be filled.
    </div>
</div>
<section class="content-header">
    <h1>
        Employee Attendance
    </h1>
</section>

<section class="content">
    <div class="row">
        <div class="col-md-12">

            <div class="box box-primary">
                <form #zoneForm="ngForm" id="zoneForm" novalidate class="form-horizontal">
                    <div class="box-body">
                        <div class="form-group">
                            <div class="">
                                <label class="col-sm-2 control-label">Select Building<span
                                        class="text-danger">*</span></label>
                                <div class="col-sm-4">
                                    <select class="form-control" name="building" [(ngModel)]="employeeAttendance.buildingId"
                                        (change)="getZonesByBuildingId()">
                                        <ng-container *ngFor="let building of buildingList">
                                            <option [value]="building.buildingId">{{building.buildingName}}
                                            </option>
                                        </ng-container>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="">
                                <label class="col-sm-2 control-label">Select Zone<span
                                        class="text-danger">*</span></label>
                                <div class="col-sm-4">
                                    <select class="form-control" name="zone" [(ngModel)]="employeeAttendance.zoneId"   (change)="getEmployees()">
                                        <ng-container *ngFor="let zone of zoneList">
                                            <option [value]="zone.zoneId">{{zone.zoneName}}
                                            </option>
                                        </ng-container>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>
                </form>
            </div>
        </div>
        <div class="col-xs-12">
            <div class="box">
                <div class="box-header">
                    <h3 class="box-title">Attendance</h3>
                </div>
                <div class="box-body table-responsive">

                    <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger"
                        class="table table-bordered table-striped table-level">
                        <thead>
                            <tr>
                                <th>S.No.</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>FromDate-ToDate</th>
                                <th>Is Absent</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let employee of employeeList; let i=index ">
                                <td>{{i+1}}</td>
                                <td>{{employee.employeeFirstName}}</td>
                                <td>{{employee.employeeLastName}}</td>
                                <td>
                                    <p-calendar [(ngModel)]="employee.rangeDates" [defaultDate]="date"
                                        (onSelect)="onChange(ref.value,employee.employeeAbsentismId)" selectionMode="range"
                                        [readonlyInput]="true" #ref>
                                    </p-calendar>
                                </td>
                                <td><input type="checkbox" [(ngModel)]="employee.isAbsent" (change)="markEmployeeAbsent($event,employee)"/></td>

                            </tr>
                            <tr *ngIf="employeeList?.length < 1">
                                <td colspan="6">No record found</td>
                            </tr>
                        </tbody>
                    </table>

                </div>
            </div>
            <button type="button" class="btn btn-primary" (click)="onSubmit()">Submit</button>
        </div>


    </div>

</section>
<script>
    $('#reservation').daterangepicker()
</script>